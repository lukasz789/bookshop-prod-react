{"version":3,"sources":["components/Cart/OrderModal.module.css","components/Cart/OrderModal.js"],"names":["module","exports","OrderModalOverlay","props","dispatch","useDispatch","cartCtx","useContext","CartContext","totalBought","items","reduce","curNr","item","amount","cartItems","map","name","type","id","className","classes","order","scroll","confirmBtn","onClick","addNewOrder","auth","currentUser","uid","JSON","parse","localStorage","getItem","uiActions","setOrderListRender","clearCart","OrderModal","Fragment","ReactDOM","createPortal","document","getElementById"],"mappings":"qHACAA,EAAOC,QAAU,CAAC,MAAQ,0BAA0B,oBAAoB,sCAAsC,OAAS,2BAA2B,WAAa,iC,iCCD/J,qHAeMC,EAAoB,SAACC,GACzB,IAAMC,EAAWC,cACXC,EAAUC,qBAAWC,KAErBC,EAAcH,EAAQI,MAAMC,QAAO,SAACC,EAAOC,GAC/C,OAAOD,EAAQC,EAAKC,SACnB,GAEGC,EACJ,6BACGT,EAAQI,MAAMM,KAAI,SAACH,GAAD,OACjB,wCACSA,EAAKI,KADd,QACyBJ,EAAKK,KAD9B,KACsCL,EAAKC,OAAQ,IAChDD,EAAKC,OAAS,EAAI,SAAW,SAFvBD,EAAKM,SAiBpB,OACE,sBAAKC,UAAWC,IAAQC,MAAxB,UACE,sBAAKF,UAAWC,IAAQE,OAAxB,UACE,iEACA,+DAAkCd,EAAlC,qBACCM,KAEH,cAAC,IAAD,CACEK,UAAWC,IAAQG,WACnBC,QAAS,WACPtB,EAAMsB,UAdZC,YAAYC,IAAKC,YAAYC,IAAKC,KAAKC,MAAMC,aAAaC,QAAQ,UAClE7B,EAAS8B,IAAUC,oBAAmB,IALtC7B,EAAQ8B,aAeN,yBA6BSC,UAfI,SAAClC,GAClB,OACE,eAAC,IAAMmC,SAAP,WACGC,IAASC,aACR,cAACtC,EAAD,CAAmBuB,QAAStB,EAAMsB,UAClCgB,SAASC,eAAe,YAEzBH,IAASC,aACR,cAAC,IAAD,CAAUf,QAAStB,EAAMsB,UACzBgB,SAASC,eAAe","file":"static/js/4.3b46cdd0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"OrderModal_order__109G9\",\"ordermodal-appear\":\"OrderModal_ordermodal-appear__cJESs\",\"scroll\":\"OrderModal_scroll__3VuA1\",\"confirmBtn\":\"OrderModal_confirmBtn__1BGM7\"};","import Backdrop from \"../UI/Backdrop\";\nimport React from \"react\";\nimport Button from \"../UI/Button\";\nimport classes from \"./OrderModal.module.css\";\nimport CartContext from \"../../store/cart-context\";\nimport { useContext } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { addNewOrder } from \"../../firebase/utils\";\n\nimport { auth } from \"../../firebase/utils\";\n\nimport { useDispatch } from \"react-redux\";\nimport { uiActions } from \"../../redux-store/ui-slice\";\n\nconst OrderModalOverlay = (props) => {\n  const dispatch = useDispatch();\n  const cartCtx = useContext(CartContext);\n\n  const totalBought = cartCtx.items.reduce((curNr, item) => {\n    return curNr + item.amount;\n  }, 0);\n\n  const cartItems = (\n    <ul>\n      {cartCtx.items.map((item) => (\n        <li key={item.id}>\n          Book \"{item.name}\" in {item.type}, {item.amount}{\" \"}\n          {item.amount > 1 ? \"copies\" : \"copy\"}\n        </li>\n      ))}\n    </ul>\n  );\n\n  const cartClearHandler = () => {\n    cartCtx.clearCart();\n  };\n\n  const addNewOrderHandler = () => {\n    addNewOrder(auth.currentUser.uid, JSON.parse(localStorage.getItem(\"cart\")));\n    dispatch(uiActions.setOrderListRender(false));\n  };\n\n  return (\n    <div className={classes.order}>\n      <div className={classes.scroll}>\n        <h2>Thank You for shopping with us!</h2>\n        <h4>You have bought as follows: ({totalBought} book(s) total)</h4>\n        {cartItems}\n      </div>\n      <Button\n        className={classes.confirmBtn}\n        onClick={() => {\n          props.onClick();\n          addNewOrderHandler();\n          cartClearHandler();\n        }}\n      >\n        Confirm\n      </Button>\n    </div>\n  );\n};\n\nconst OrderModal = (props) => {\n  return (\n    <React.Fragment>\n      {ReactDOM.createPortal(\n        <OrderModalOverlay onClick={props.onClick} />,\n        document.getElementById(\"overlay\")\n      )}\n      {ReactDOM.createPortal(\n        <Backdrop onClick={props.onClick} />,\n        document.getElementById(\"overlay\")\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default OrderModal;\n"],"sourceRoot":""}