{"version":3,"sources":["redux-store/ui-slice.js","firebase/utils.js","firebase/config.js","components/UI/Button.js","components/Authentication/SignIn.module.css","store/cart-context.js","components/Books/BookItem.module.css","components/Header/MobileNavigation.module.css","components/Books/Books.module.css","components/Orders/Orders.module.css","components/Orders/OrderItem.module.css","components/UI/Backdrop.js","components/Header/Header.module.css","components/Header/NavLinks.module.css","components/Header/HeaderBtn.module.css","components/UI/forms/FormSubmissionPopup.module.css","components/Books/BookItemForm.module.css","components/Books/BookDetails.module.css","components/Authentication/SignUp.module.css","components/UI/forms/InputWrap.module.css","components/Authentication/PasswordRecovery.module.css","components/UI/BackgroundImage.module.css","components/Header/Navigation.module.css","components/UI/NavButton.module.css","components/UI/Backdrop.module.css","components/UI/Card.module.css","components/UI/Button.module.css","components/UI/Caption.module.css","redux-store/auth-slice.js","assets/background_books_image.jpg","components/UI/BackgroundImage.js","components/UI/NavButton.js","components/Header/NavLinks.js","components/Header/Navigation.js","components/Header/MobileNavigation.js","components/Header/HeaderBtn.js","components/Header/Header.js","store/CartProvider.js","components/UI/LoadingScreen.js","components/UI/forms/FormSubmissionPopup.js","layouts/Mainlayout.js","components/UI/Card.js","components/Books/BookItemForm.js","components/Books/BookDetails.js","components/Books/BookItem.js","components/Books/Books.js","pages/Mainpage.js","redux-store/auth-actions.js","components/UI/forms/InputWrap.js","components/UI/Caption.js","hooks/use-input.js","components/Authentication/SignUp.js","pages/Register.js","components/Authentication/SignIn.js","pages/Login.js","components/Authentication/PasswordRecovery.js","pages/PasswordReset.js","components/Orders/OrderItem.js","components/Orders/Orders.js","pages/Orderspage.js","App.js","redux-store/index.js","index.js"],"names":["uiSlice","createSlice","name","initialState","spinner","notification","popup","mobileNavMenu","orderListRender","reducers","showSpinner","state","action","payload","setNotification","status","message","setPopup","setMobileNavMenu","setOrderListRender","uiActions","actions","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","GoogleProvider","GoogleAuthProvider","setCustomParameters","prompt","signInWithGoogle","signInWithPopup","handleNewProfile","userAuth","additionalData","a","uid","displayName","email","userRef","doc","get","exists","timestamp","Date","getTime","set","createdDate","console","log","addNewOrder","cartData","orderRef","JSON","stringify","Button","props","type","className","classes","button","onClick","disabled","children","module","exports","CartContext","React","createContext","items","totalAmount","clearCart","addItem","item","removeWholeItem","id","removeOneItem","Backdrop","backdrop","authSlice","currentUser","loginSuccess","registerSuccess","resetPasswordSuccess","setCurrentUser","setLoginSuccess","setRegisterSuccess","setResetPasswordSuccess","authActions","BackgroundImage","src","booksImage","alt","NavButton","NavLinks","useSelector","dispatch","useDispatch","clickNavBtnHandler","Fragment","to","activeClassName","active","signOut","Navigation","navigation","MobileNavigation","ui","menu","fontSize","ReactDOM","createPortal","mobileNav","popupMenu","document","getElementById","HeaderBtn","cartCtx","useContext","useState","btnEffectStatus","setBtnEffectStatus","numberOfItemsInCart","reduce","curNr","amount","iconCartStyle","icon","bump","useEffect","timer","setTimeout","clearTimeout","Badge","showZero","badgeContent","color","cart","Header","header","style","textDecoration","bookshopcaption","navlinks","onOpen","defaultCartState","localStorage","getItem","parse","cartReducer","updatedItems","updatedTotalAmount","price","exisitingCartItemIndex","findIndex","existingCartItem","updatedItem","concat","setItem","existingCartItemIndex","filter","CartProvider","useReducer","cartState","dispatchCartAction","cartContext","Provider","value","LoadingScreen","position","left","top","CircularProgress","size","FormSubmissionPopup","popupStatusStyle","setPopupStatusStyle","popupVisible","popupStyle","notificationStatus","error","success","Cart","lazy","OrderModal","Mainlayout","cartVisibility","setCartVisibility","orderModalVisibility","setOrderModalVisibility","popUpDisabler","fallback","onClose","onOrderModalToggle","Card","card","BookItemForm","typeSelected","setTypeSelected","paperCounter","ebookCounter","form","onSubmit","event","preventDefault","onAdd","select","onChange","target","BookDetails","detailsmodal","details","btn","BookItem","formStatus","setFormStatus","detailsStatus","setDetailsStatus","nameClasses","shake","book","toFixed","moreinfo","Books","searchTitle","setSearchTitle","allBooks","setAllBooks","errorMsg","setErrorMsg","collection","then","snapshot","empty","metadata","fromCache","Error","docs","map","data","fetchAllBooks","booksList","toLowerCase","includes","searchheader","placeholder","titlesearchbar","maxLength","scroll","length","Mainpage","registerUser","password","createUserWithEmailAndPassword","user","resetPassword","resetCfg","url","sendPasswordResetEmail","InputWrap","inputClasses","hasError","Caption","caption","initialInputState","isTouched","inputStateReducer","useInput","validateValue","inputState","valueIsValid","valueChangeHandler","inputBlurHandler","isValid","reset","validateEmail","test","validatePassword","withRouter","spinnerVisible","history","trim","nameValue","nameIsValid","nameHasError","nameChangeHandler","nameBlurHandler","resetName","mailValue","mailIsValid","mailHasError","mailChangeHandler","mailBlurHandler","resetMail","passwordValue","passwordIsValid","passwordHasError","passwordChangeHandler","passwordBlurHandler","confirmPasswordValue","confirmPasswordIsValid","confirmPasswordHasError","confirmPasswordChangeHandler","confirmPasswordBlurHandler","resetconfirmPassword","formIsValid","resetForm","useCallback","push","submitHandler","mainwrap","htmlFor","onBlur","Register","SignUp","mail","setMail","setPassword","signInWithEmailAndPassword","loginUser","resetWrap","btnGoogle","Login","SignIn","handleFormSubmit","PasswordReset","OrderItem","orderDate","getMonth","getDate","getFullYear","month","year","orderDateString","order","totalamount","orderQuantity","Orders","allOrders","setAllOrders","orderList","orders","tableheader","Orderspage","App","authListener","onAuthStateChanged","onSnapshot","path","render","store","configureStore","reducer","StrictMode","basename"],"mappings":"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","file":"static/js/main.22af467d.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst uiSlice = createSlice({\n  name: \"ui\",\n  initialState: {\n    spinner: null,\n    notification: null,\n    popup: false,\n    mobileNavMenu: false,\n    orderListRender: true,\n  },\n  reducers: {\n    showSpinner(state, action) {\n      state.spinner = action.payload;\n    },\n    setNotification(state, action) {\n      state.notification = {\n        status: action.payload.status,\n        message: action.payload.message,\n      };\n    },\n    setPopup(state, action) {\n      state.popup = action.payload;\n    },\n    setMobileNavMenu(state, action) {\n      state.mobileNavMenu = action.payload;\n    },\n    setOrderListRender(state, action) {\n      state.orderListRender = action.payload;\n    },\n  },\n});\n\nexport default uiSlice;\nexport const uiActions = uiSlice.actions;\n","import firebase from \"firebase/compat/app\";\nimport \"firebase/compat/firestore\";\nimport \"firebase/compat/auth\";\nimport { cfgFirebase } from \"./config\";\n\n//connect to fb:\nfirebase.initializeApp(cfgFirebase);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n\nconst GoogleProvider = new firebase.auth.GoogleAuthProvider();\nGoogleProvider.setCustomParameters({ prompt: \"select_account\" });\nexport const signInWithGoogle = () => auth.signInWithPopup(GoogleProvider);\n\n//add new user to db\nexport const handleNewProfile = async (userAuth, additionalData) => {\n  if (!userAuth) return;\n\n  const { uid, displayName, email } = userAuth;\n\n  const userRef = firestore.doc(`users/${uid}`); //\"users\" collection created before in fb database\n  //returns reference document with some build in methods(get/set data)\n\n  const snapshot = await userRef.get(); //object returned with some data about user\n\n  if (!snapshot.exists) {\n    const timestamp = new Date().getTime();\n\n    try {\n      await userRef.set({\n        displayName,\n        email,\n        createdDate: timestamp,\n        ...additionalData,\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return userRef; //used to update local state of app(header fe)\n};\n\nexport const addNewOrder = async (uid, cartData) => {\n  if (!uid) return;\n\n  const timestamp = new Date().getTime();\n\n  const orderRef = firestore.doc(`orders/${uid}/userorders/${timestamp}`);\n\n  try {\n    await orderRef.set({\n      cartData: JSON.stringify(cartData),\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n","export const cfgFirebase = {\n  apiKey: \"AIzaSyDKWKsqJ1vgUss06Laxv8_mO414ZFSGXpk\",\n  authDomain: \"react-bookshop-4ca2f.firebaseapp.com\",\n  projectId: \"react-bookshop-4ca2f\",\n  storageBucket: \"react-bookshop-4ca2f.appspot.com\",\n  messagingSenderId: \"633472712977\",\n  appId: \"1:633472712977:web:f3fa9651dac7b2142d0cb0\",\n};\n","import classes from \"./Button.module.css\";\n\nconst Button = (props) => {\n  return (\n    <button\n      type={props.type || \"button\"}\n      className={`${props.className} ${classes.button} `}\n      onClick={props.onClick}\n      disabled={props.disabled || false}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainwrap\":\"SignIn_mainwrap__2EbRg\",\"scroll\":\"SignIn_scroll__38gae\",\"btn\":\"SignIn_btn__I-4z1\",\"btnGoogle\":\"SignIn_btnGoogle__2iKmU\",\"resetWrap\":\"SignIn_resetWrap__29k2b\",\"reset\":\"SignIn_reset__2Q5WU\"};","import React from \"react\";\n\nconst CartContext = React.createContext({\n  items: [],\n  totalAmount: 0,\n  clearCart: () => {},\n  addItem: (item) => {},\n  removeWholeItem: (id) => {},\n  removeOneItem: (id) => {},\n});\n\nexport default CartContext;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"book\":\"BookItem_book__5vnL1\",\"price\":\"BookItem_price__1jQEL\",\"moreinfo\":\"BookItem_moreinfo__1pP5a\",\"name\":\"BookItem_name__3W6eH\",\"shake\":\"BookItem_shake__1yLAw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"MobileNavigation_menu__1Nr9m\",\"mobileNav\":\"MobileNavigation_mobileNav__2DNHw\",\"popupMenu\":\"MobileNavigation_popupMenu__1WdEH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll\":\"Books_scroll__24MDJ\",\"searchheader\":\"Books_searchheader__2QJMd\",\"titlesearchbar\":\"Books_titlesearchbar__3hQ2U\",\"error\":\"Books_error__CFydQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll\":\"Orders_scroll__1Wera\",\"error\":\"Orders_error__H6CPw\",\"orders\":\"Orders_orders__2Jx4P\",\"tableheader\":\"Orders_tableheader__3Kyfz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"OrderItem_order__1pV8Q\"};","import classes from \"./Backdrop.module.css\";\n\nconst Backdrop = (props) => {\n  return <div className={classes.backdrop} onClick={props.onClick} />;\n};\n\nexport default Backdrop;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1VCKf\",\"navlinks\":\"Header_navlinks__2XzKG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"NavLinks_active__133j8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart\":\"HeaderBtn_cart__2SqFc\",\"icon\":\"HeaderBtn_icon__3bQ4x\",\"bump\":\"HeaderBtn_bump__2w7kt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification\":\"FormSubmissionPopup_notification__2BwXG\",\"error\":\"FormSubmissionPopup_error__Lhi_4\",\"success\":\"FormSubmissionPopup_success__1k1JD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"BookItemForm_form__Zzh86\",\"select\":\"BookItemForm_select__3n7TT\",\"item\":\"BookItemForm_item__2KFqX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailsmodal\":\"BookDetails_detailsmodal__2Of-5\",\"details-appear\":\"BookDetails_details-appear__kIAQJ\",\"details\":\"BookDetails_details__HmNdv\",\"btn\":\"BookDetails_btn__1ntyc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll\":\"SignUp_scroll__2wpKi\",\"mainwrap\":\"SignUp_mainwrap__j_HHg\",\"btn\":\"SignUp_btn__CwJwc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-control\":\"InputWrap_form-control__3yjlN\",\"invalid\":\"InputWrap_invalid__2tGH-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainwrap\":\"PasswordRecovery_mainwrap__3aBko\",\"btn\":\"PasswordRecovery_btn__wWhOd\",\"scroll\":\"PasswordRecovery_scroll__gOUFJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-image\":\"BackgroundImage_main-image__w64W_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"Navigation_navigation__11jj5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"NavButton_button__1qdXz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Backdrop_backdrop__1uHu4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__1m44e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__6-R6B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"caption\":\"Caption_caption__3jnYN\"};","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    currentUser: null,\n    loginSuccess: false,\n    registerSuccess: false,\n    resetPasswordSuccess: false,\n  },\n  reducers: {\n    setCurrentUser(state, action) {\n      state.currentUser = action.payload;\n    },\n    setLoginSuccess(state, action) {\n      state.loginSuccess = action.payload;\n    },\n    setRegisterSuccess(state, action) {\n      state.registerSuccess = action.payload;\n    },\n    setResetPasswordSuccess(state, action) {\n      state.resetPasswordSuccess = action.payload;\n    },\n  },\n});\n\nexport const authActions = authSlice.actions;\n\nexport default authSlice;\n","export default __webpack_public_path__ + \"static/media/background_books_image.3a124e66.jpg\";","import booksImage from \"../../assets/background_books_image.jpg\";\nimport classes from \"./BackgroundImage.module.css\";\n\nconst BackgroundImage = () => {\n  return (\n    <div className={classes[\"main-image\"]}>\n      <img src={booksImage} alt=\"books\" />\n    </div>\n  );\n};\n\nexport default BackgroundImage;\n","import classes from \"./NavButton.module.css\";\n\nconst NavButton = (props) => {\n  return (\n    <button\n      type={props.type || \"button\"}\n      className={`${props.className} ${classes.button} `}\n      onClick={props.onClick}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default NavButton;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nimport { NavLink } from \"react-router-dom\";\n\nimport NavButton from \"../UI/NavButton\";\n\nimport { auth } from \"../../firebase/utils\";\n\nimport classes from \"./NavLinks.module.css\";\n\nimport { useDispatch } from \"react-redux\";\nimport { uiActions } from \"../../redux-store/ui-slice\";\n\nconst NavLinks = (props) => {\n  const currentUser = useSelector((state) => state.auth.currentUser);\n  const dispatch = useDispatch();\n\n  const logoutHandler = () => {\n    auth.signOut();\n  };\n\n  const clickNavBtnHandler = () => {\n    dispatch(uiActions.setMobileNavMenu(false));\n  };\n\n  return (\n    <React.Fragment>\n      {!currentUser && (\n        <React.Fragment>\n          <NavLink\n            to=\"/register\"\n            activeClassName={classes.active}\n            onClick={clickNavBtnHandler}\n          >\n            <NavButton>Register</NavButton>\n          </NavLink>\n          <NavLink\n            to=\"/login\"\n            activeClassName={classes.active}\n            onClick={clickNavBtnHandler}\n          >\n            <NavButton>Login</NavButton>\n          </NavLink>\n        </React.Fragment>\n      )}\n      {currentUser && (\n        <React.Fragment>\n          <NavButton\n            onClick={() => {\n              logoutHandler();\n              clickNavBtnHandler();\n            }}\n          >\n            Logout\n          </NavButton>\n          <NavLink\n            to=\"/orders\"\n            activeClassName={classes.active}\n            onClick={clickNavBtnHandler}\n          >\n            <NavButton>Orders</NavButton>\n          </NavLink>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default NavLinks;\n","import React from \"react\";\n\nimport classes from \"./Navigation.module.css\";\n\nimport NavLinks from \"./NavLinks\";\n\nconst Navigation = () => {\n  return (\n    <div className={classes.navigation}>\n      <NavLinks />\n    </div>\n  );\n};\n\nexport default Navigation;\n","import React from \"react\";\n\nimport classes from \"./MobileNavigation.module.css\";\n\nimport NavLinks from \"./NavLinks\";\n\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\nimport ReactDOM from \"react-dom\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { uiActions } from \"../../redux-store/ui-slice\";\n\nconst MobileNavigation = () => {\n  const dispatch = useDispatch();\n  const mobileNavMenu = useSelector((state) => state.ui.mobileNavMenu);\n\n  const openMenuBtnHandler = () => {\n    dispatch(uiActions.setMobileNavMenu(true));\n  };\n\n  const closeMenuBtnHandler = () => {\n    dispatch(uiActions.setMobileNavMenu(false));\n  };\n\n  return (\n    <React.Fragment>\n      {!mobileNavMenu && (\n        <div className={classes.menu}>\n          <MenuIcon fontSize=\"large\" onClick={openMenuBtnHandler} />\n        </div>\n      )}\n      {mobileNavMenu && (\n        <div className={classes.menu}>\n          <CloseIcon fontSize=\"large\" onClick={closeMenuBtnHandler} />\n        </div>\n      )}\n      {ReactDOM.createPortal(\n        <div className={classes.mobileNav}>\n          {mobileNavMenu && (\n            <div className={classes.popupMenu}>\n              <NavLinks />\n            </div>\n          )}\n        </div>,\n        document.getElementById(\"overlay\")\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default MobileNavigation;\n","import ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\nimport { Badge } from \"@material-ui/core\";\n\nimport { useContext, useState, useEffect } from \"react\";\nimport CartContext from \"../../store/cart-context\";\nimport classes from \"./HeaderBtn.module.css\";\n\nconst HeaderBtn = (props) => {\n  const cartCtx = useContext(CartContext);\n  const [btnEffectStatus, setBtnEffectStatus] = useState(false);\n\n  const numberOfItemsInCart = cartCtx.items.reduce((curNr, item) => {\n    return curNr + item.amount;\n  }, 0);\n\n  const iconCartStyle = `${classes.icon} ${\n    btnEffectStatus ? classes.bump : \"\"\n  }`;\n\n  useEffect(() => {\n    if (numberOfItemsInCart === 0) {\n      return;\n    }\n    setBtnEffectStatus(true);\n\n    const timer = setTimeout(() => {\n      setBtnEffectStatus(false);\n    }, 300);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [cartCtx.items, numberOfItemsInCart]);\n\n  return (\n    <Badge\n      showZero\n      badgeContent={numberOfItemsInCart}\n      color=\"primary\"\n      onClick={props.onClick}\n      className={classes.cart}\n    >\n      <ShoppingCartIcon fontSize=\"large\" className={iconCartStyle} />\n    </Badge>\n  );\n};\n\nexport default HeaderBtn;\n","import React from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport classes from \"./Header.module.css\";\nimport BackgroundImage from \"../UI/BackgroundImage\";\n\nimport { Link } from \"react-router-dom\";\n\nimport Navigation from \"./Navigation\";\nimport MobileNavigation from \"./MobileNavigation\";\n\nimport HeaderBtn from \"./HeaderBtn\";\n\nimport { useDispatch } from \"react-redux\";\nimport { uiActions } from \"../../redux-store/ui-slice\";\n\nconst Header = (props) => {\n  const currentUser = useSelector((state) => state.auth.currentUser);\n  const dispatch = useDispatch();\n\n  const clickHeaderCaptionHandler = () => {\n    dispatch(uiActions.setMobileNavMenu(false));\n  };\n\n  return (\n    <React.Fragment>\n      <header className={classes.header}>\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\n          <h1\n            className={classes.bookshopcaption}\n            onClick={clickHeaderCaptionHandler}\n          >\n            Bookshop\n          </h1>\n        </Link>\n        <div className={classes.navlinks}>\n          <Navigation />\n          <MobileNavigation />\n          {currentUser && <HeaderBtn onClick={props.onOpen} />}\n        </div>\n      </header>\n      <BackgroundImage />\n    </React.Fragment>\n  );\n};\n\nexport default Header;\n","import { useReducer } from \"react\";\nimport CartContext from \"./cart-context\";\n\nconst defaultCartState =\n  localStorage.getItem(\"cart\") === null\n    ? {\n        items: [],\n        totalAmount: 0,\n      }\n    : JSON.parse(localStorage.getItem(\"cart\"));\n\nconst cartReducer = (state, action) => {\n  if (action.type === \"ADD\") {\n    const updatedTotalAmount = state.totalAmount + action.item.price;\n    let updatedItems;\n    const exisitingCartItemIndex = state.items.findIndex(\n      (item) => item.id === action.item.id\n    );\n    const existingCartItem = state.items[exisitingCartItemIndex];\n\n    if (existingCartItem) {\n      const updatedItem = {\n        ...existingCartItem,\n        amount: existingCartItem.amount + 1,\n      };\n      updatedItems = [...state.items];\n      updatedItems[exisitingCartItemIndex] = updatedItem;\n    } else {\n      updatedItems = state.items.concat(action.item);\n    }\n\n    console.log(updatedItems);\n    console.log(updatedTotalAmount);\n    localStorage.setItem(\n      \"cart\",\n      JSON.stringify({\n        items: updatedItems,\n        totalAmount: updatedTotalAmount,\n      })\n    );\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n    };\n  }\n\n  if (action.type === \"REMOVE_WHOLE\") {\n    const existingCartItemIndex = state.items.findIndex(\n      (item) => item.id === action.id\n    );\n    const existingCartItem = state.items[existingCartItemIndex];\n    let updatedTotalAmount =\n      state.totalAmount - existingCartItem.price * existingCartItem.amount;\n    updatedTotalAmount = updatedTotalAmount < 0 ? 0 : updatedTotalAmount;\n    const updatedItems = state.items.filter((item) => item.id !== action.id);\n\n    console.log(updatedItems);\n    localStorage.setItem(\n      \"cart\",\n      JSON.stringify({\n        items: updatedItems,\n        totalAmount: updatedTotalAmount,\n      })\n    );\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n    };\n  }\n\n  if (action.type === \"REMOVE_ONE\") {\n    const existingCartItemIndex = state.items.findIndex(\n      (item) => item.id === action.id\n    );\n    const existingCartItem = state.items[existingCartItemIndex];\n    let updatedTotalAmount = state.totalAmount - existingCartItem.price;\n    updatedTotalAmount = updatedTotalAmount < 0 ? 0 : updatedTotalAmount;\n    let updatedItems;\n\n    if (existingCartItem.amount === 1) {\n      updatedItems = state.items.filter((item) => item.id !== action.id);\n    } else {\n      const updatedItem = {\n        ...existingCartItem,\n        amount: existingCartItem.amount - 1,\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    }\n\n    console.log(updatedItems);\n    localStorage.setItem(\n      \"cart\",\n      JSON.stringify({\n        items: updatedItems,\n        totalAmount: updatedTotalAmount,\n      })\n    );\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n    };\n  }\n\n  if (action.type === \"CLEAR\") {\n    localStorage.setItem(\n      \"cart\",\n      JSON.stringify({\n        items: [],\n        totalAmount: 0,\n      })\n    );\n    return {\n      items: [],\n      totalAmount: 0,\n    };\n  }\n  return defaultCartState;\n};\n\nconst CartProvider = (props) => {\n  const [cartState, dispatchCartAction] = useReducer(\n    cartReducer,\n    defaultCartState\n  );\n\n  const clearCartHandler = () => {\n    dispatchCartAction({ type: \"CLEAR\" });\n  };\n\n  const addItemToCartHandler = (item) => {\n    dispatchCartAction({ type: \"ADD\", item: item });\n  };\n\n  const removeWholeItemFromCartHandler = (id) => {\n    dispatchCartAction({ type: \"REMOVE_WHOLE\", id: id });\n  };\n\n  const removeOneItemFromCartHandler = (id) => {\n    dispatchCartAction({ type: \"REMOVE_ONE\", id: id });\n  };\n\n  const cartContext = {\n    items: cartState.items,\n    totalAmount: cartState.totalAmount,\n    clearCart: clearCartHandler,\n    addItem: addItemToCartHandler,\n    removeWholeItem: removeWholeItemFromCartHandler,\n    removeOneItem: removeOneItemFromCartHandler,\n  };\n\n  return (\n    <CartContext.Provider value={cartContext}>\n      {props.children}\n    </CartContext.Provider>\n  );\n};\n\nexport default CartProvider;\n","import React from \"react\";\n\nimport Backdrop from \"./Backdrop\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport BackgroundImage from \"./BackgroundImage\";\n\nconst LoadingScreen = () => {\n  return (\n    <React.Fragment>\n      <Backdrop />\n      <div\n        style={{\n          position: \"fixed\",\n          left: \"calc(50% - 2rem)\",\n          top: \"calc(50% - 2rem)\",\n        }}\n      >\n        <CircularProgress size={\"4rem\"} color={\"secondary\"} />\n      </div>\n      <BackgroundImage />\n    </React.Fragment>\n  );\n};\n\nexport default LoadingScreen;\n","import React, { useEffect, useState } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport classes from \"./FormSubmissionPopup.module.css\";\n\nconst FormSubmissionPopup = () => {\n  const [popupStatusStyle, setPopupStatusStyle] = useState(\"\");\n\n  const popupVisible = useSelector((state) => state.ui.popup);\n  const notification = useSelector((state) => state.ui.notification);\n\n  const popupStyle = `${classes.notification} ${popupStatusStyle}`;\n\n  useEffect(() => {\n    if (notification) {\n      const notificationStatus = notification.status;\n\n      if (notificationStatus === \"error\") {\n        setPopupStatusStyle(classes.error);\n      }\n      if (notificationStatus === \"success\") {\n        setPopupStatusStyle(classes.success);\n      }\n    }\n  }, [notification]);\n\n  return (\n    <React.Fragment>\n      {popupVisible ? (\n        <div className={popupStyle}>{notification.message}</div>\n      ) : (\n        \"\"\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default FormSubmissionPopup;\n","import React, { Suspense, useState, useEffect } from \"react\";\n\nimport Header from \"../components/Header/Header\";\nimport CartProvider from \"../store/CartProvider\";\n\nimport LoadingScreen from \"../components/UI/LoadingScreen\";\nimport FormSubmissionPopup from \"../components/UI/forms/FormSubmissionPopup\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { uiActions } from \"../redux-store/ui-slice\";\n\nconst Cart = React.lazy(() => import(\"../components/Cart/Cart\"));\nconst OrderModal = React.lazy(() => import(\"../components/Cart/OrderModal\"));\n\nconst Mainlayout = (props) => {\n  const [cartVisibility, setCartVisibility] = useState(false);\n  const [orderModalVisibility, setOrderModalVisibility] = useState(false);\n\n  const popupVisible = useSelector((state) => state.ui.popup);\n  const dispatch = useDispatch();\n\n  const openCartHandler = () => {\n    setCartVisibility(true);\n  };\n\n  const hideCartHandler = () => {\n    setCartVisibility(false);\n  };\n\n  const hideOrderModalHandler = () => {\n    setOrderModalVisibility(false);\n  };\n\n  const openOrderModalHandler = () => {\n    setOrderModalVisibility(true);\n  };\n\n  useEffect(() => {\n    if (popupVisible) {\n      const popUpDisabler = setTimeout(() => {\n        dispatch(uiActions.setPopup(false));\n      }, 4000);\n      return () => {\n        return clearTimeout(popUpDisabler);\n      };\n    }\n  }, [popupVisible, dispatch]);\n\n  return (\n    <Suspense fallback={<LoadingScreen />}>\n      <CartProvider>\n        <Header onOpen={openCartHandler} {...props} />\n        <FormSubmissionPopup />\n        {props.children}\n        {cartVisibility && (\n          <Cart\n            onClose={hideCartHandler}\n            onOrderModalToggle={openOrderModalHandler}\n          />\n        )}\n        {orderModalVisibility && <OrderModal onClick={hideOrderModalHandler} />}\n      </CartProvider>\n    </Suspense>\n  );\n};\n\nexport default Mainlayout;\n","import classes from \"./Card.module.css\";\n\nconst Card = (props) => {\n  return (\n    <div className={`${props.className} ${classes.card} `}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import classes from \"./BookItemForm.module.css\";\n\nimport Button from \"../UI/Button\";\nimport { useState } from \"react\";\n\nconst BookItemForm = (props) => {\n  const [typeSelected, setTypeSelected] = useState(\"paper\");\n  let paperCounter = 0;\n  let ebookCounter = 0;\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if (typeSelected === \"paper\") {\n      props.onAdd(typeSelected, ++paperCounter);\n    } else {\n      props.onAdd(typeSelected, ++ebookCounter);\n    }\n  };\n\n  const optionChangeHandler = (event) => {\n    setTypeSelected(event.target.value);\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitHandler}>\n      <select\n        value={typeSelected}\n        name=\"booktype\"\n        className={classes.select}\n        onChange={optionChangeHandler}\n      >\n        <option value=\"ebook\">E-book</option>\n        <option value=\"paper\">Paper</option>\n      </select>\n      <Button type=\"submit\" className={classes.item}>\n        + Add\n      </Button>\n    </form>\n  );\n};\n\nexport default BookItemForm;\n","import classes from \"./BookDetails.module.css\";\nimport Backdrop from \"../UI/Backdrop\";\nimport React from \"react\";\nimport Button from \"../UI/Button\";\n\nconst BookDetails = (props) => {\n  return (\n    <React.Fragment>\n      <div className={classes.detailsmodal}>\n        <div className={classes.details}>\n          <h1>{props.name}</h1>\n          {props.details}\n        </div>\n        <Button className={classes.btn} onClick={props.onClose}>\n          OK\n        </Button>\n      </div>\n      <Backdrop onClick={props.onClose} />\n    </React.Fragment>\n  );\n};\n\nexport default BookDetails;\n","import { useContext, useEffect } from \"react\";\nimport CartContext from \"../../store/cart-context\";\nimport classes from \"./BookItem.module.css\";\nimport BookItemForm from \"./BookItemForm\";\nimport { useState } from \"react\";\nimport BookDetails from \"./BookDetails\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { uiActions } from \"../../redux-store/ui-slice\";\n\nconst BookItem = (props) => {\n  const dispatch = useDispatch();\n  const currentUser = useSelector((state) => state.auth.currentUser);\n\n  const cartCtx = useContext(CartContext);\n  const [formStatus, setFormStatus] = useState(false);\n  const [detailsStatus, setDetailsStatus] = useState(false);\n\n  const nameClasses = `${classes.name} ${formStatus ? classes.shake : ``}`;\n\n  const addItemHandler = (type, amount) => {\n    if (currentUser) {\n      cartCtx.addItem({\n        id: `${props.id}_${type}`,\n        name: props.name,\n        price: props.price,\n        type: type,\n        amount: amount,\n      });\n      setFormStatus(true);\n    } else {\n      dispatch(\n        uiActions.setNotification({\n          status: \"error\",\n          message: \"Please log in!\",\n        })\n      );\n      dispatch(uiActions.setPopup(true));\n    }\n  };\n\n  const closeMoreinfoHandler = () => {\n    setDetailsStatus(false);\n  };\n\n  const clickMoreinfoHandler = () => {\n    setDetailsStatus(true);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setFormStatus(false);\n    }, 300);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [formStatus]);\n\n  return (\n    <li className={classes.book}>\n      <h1 className={nameClasses}>{props.name}</h1>\n      <div className={classes.price}>${props.price.toFixed(2)}</div>\n      <div className={classes.moreinfo} onClick={clickMoreinfoHandler}>\n        more info\n      </div>\n      {detailsStatus && (\n        <BookDetails\n          name={props.name}\n          details={props.details}\n          onClose={closeMoreinfoHandler}\n        />\n      )}\n      <div>\n        <BookItemForm\n          id={props.id}\n          onAdd={addItemHandler}\n          formStatus={formStatus}\n        />\n      </div>\n    </li>\n  );\n};\n\nexport default BookItem;\n","import classes from \"./Books.module.css\";\nimport Card from \"../UI/Card\";\n\nimport BookItem from \"./BookItem\";\nimport React, { useState, useEffect } from \"react\";\n\nimport { CircularProgress } from \"@material-ui/core\";\n\nimport { firestore } from \"../../firebase/utils\";\n\nconst Books = (props) => {\n  const [searchTitle, setSearchTitle] = useState(\"\");\n  const [allBooks, setAllBooks] = useState([]);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  useEffect(() => {\n    const fetchAllBooks = async () => {\n      try {\n        await firestore\n          .collection(\"books\")\n          .get()\n          .then((snapshot) => {\n            if (snapshot.empty && snapshot.metadata.fromCache) {\n              throw new Error();\n            }\n            const allBooks = snapshot.docs.map((doc) => {\n              return {\n                ...doc.data(),\n                id: doc.id,\n              };\n            });\n            setAllBooks(allBooks);\n          });\n      } catch (err) {\n        console.log(err);\n        setErrorMsg(\n          \"Something went wrong. Please check Your internet connection or try again later.\"\n        );\n      }\n    };\n\n    fetchAllBooks();\n  }, []);\n\n  const booksList = allBooks\n    .filter((item) => {\n      if (searchTitle === \"\") {\n        return item;\n      } else if (item.name.toLowerCase().includes(searchTitle.toLowerCase())) {\n        return item;\n      }\n      return false;\n    })\n    .map((book) => (\n      <BookItem\n        key={book.id}\n        id={book.id}\n        name={book.name}\n        price={book.price}\n        details={book.details}\n      />\n    ));\n\n  const titleChangeHandler = (event) => {\n    setSearchTitle(event.target.value);\n  };\n\n  return (\n    <Card>\n      <div className={classes.searchheader}>\n        <input\n          placeholder=\"Search title...\"\n          type=\"text\"\n          onChange={titleChangeHandler}\n          className={classes.titlesearchbar}\n          maxLength=\"20\"\n        />\n      </div>\n      <div className={classes.scroll}>\n        {allBooks.length > 0 ? (\n          <ul>{booksList}</ul>\n        ) : (\n          <React.Fragment>\n            {errorMsg !== \"\" && <h3 className={classes.error}>{errorMsg}</h3>}\n            {errorMsg === \"\" && (\n              <div\n                style={{\n                  position: \"fixed\",\n                  left: \"calc(50% - 2rem)\",\n                  top: \"calc(50% - 0.5rem)\",\n                }}\n              >\n                <CircularProgress size={\"4rem\"} color={\"secondary\"} />\n              </div>\n            )}\n          </React.Fragment>\n        )}\n      </div>\n    </Card>\n  );\n};\n\nexport default Books;\n","import Books from \"../components/Books/Books\";\n\nconst Mainpage = () => {\n  return <Books />;\n};\n\nexport default Mainpage;\n","import { authActions } from \"./auth-slice\";\nimport { uiActions } from \"./ui-slice\";\n\nimport { auth, handleNewProfile, signInWithGoogle } from \"../firebase/utils\";\n\nexport const loginUser = (email, password) => {\n  return async (dispatch) => {\n    try {\n      dispatch(uiActions.showSpinner(true));\n      await auth.signInWithEmailAndPassword(email, password);\n      dispatch(authActions.setLoginSuccess(true));\n      dispatch(\n        uiActions.setNotification({\n          status: \"success\",\n          message: \"Logged in!\",\n        })\n      );\n    } catch (error) {\n      console.log(error.message);\n      dispatch(\n        uiActions.setNotification({\n          status: \"error\",\n          message: \"Something went wrong!\",\n        })\n      );\n    }\n    dispatch(uiActions.setPopup(true));\n    dispatch(authActions.setLoginSuccess(false));\n    dispatch(uiActions.showSpinner(false));\n  };\n};\n\nexport const loginWithGoogleUser = () => {\n  return async (dispatch) => {\n    try {\n      dispatch(uiActions.showSpinner(true));\n      await signInWithGoogle();\n      dispatch(authActions.setLoginSuccess(true));\n      dispatch(\n        uiActions.setNotification({\n          status: \"success\",\n          message: \"Logged in!\",\n        })\n      );\n    } catch (error) {\n      console.log(error.message);\n      dispatch(\n        uiActions.setNotification({\n          status: \"error\",\n          message: \"Something went wrong!\",\n        })\n      );\n    }\n    dispatch(uiActions.setPopup(true));\n    dispatch(authActions.setLoginSuccess(false));\n    dispatch(uiActions.showSpinner(false));\n  };\n};\n\nexport const registerUser = (email, password, name) => {\n  return async (dispatch) => {\n    try {\n      dispatch(uiActions.showSpinner(true));\n      const { user } = await auth.createUserWithEmailAndPassword(\n        email,\n        password\n      );\n      await handleNewProfile(user, { displayName: name });\n\n      dispatch(authActions.setRegisterSuccess(true));\n      dispatch(\n        uiActions.setNotification({\n          status: \"success\",\n          message: \"Registered!\",\n        })\n      );\n    } catch (error) {\n      console.log(error.message);\n      dispatch(\n        uiActions.setNotification({\n          status: \"error\",\n          message: \"Something went wrong!\",\n        })\n      );\n    }\n    dispatch(uiActions.setPopup(true));\n    dispatch(authActions.setRegisterSuccess(false));\n    dispatch(uiActions.showSpinner(false));\n  };\n};\n\nexport const resetPassword = (email) => {\n  return async (dispatch) => {\n    try {\n      dispatch(uiActions.showSpinner(true));\n      const resetCfg = {\n        url: \"http://localhost:3000/login\", //send user after reset password\n      };\n\n      await auth.sendPasswordResetEmail(email, resetCfg);\n      dispatch(\n        uiActions.setNotification({\n          status: \"success\",\n          message: \"Password reset!\",\n        })\n      );\n      dispatch(authActions.setResetPasswordSuccess(true));\n    } catch (error) {\n      console.log(error);\n      dispatch(\n        uiActions.setNotification({\n          status: \"error\",\n          message: \"Something went wrong!\",\n        })\n      );\n    }\n    dispatch(uiActions.setPopup(true));\n    dispatch(authActions.setResetPasswordSuccess(false));\n    dispatch(uiActions.showSpinner(false));\n  };\n};\n","import classes from \"./InputWrap.module.css\";\n\nconst InputWrap = (props) => {\n  const inputClasses = props.hasError\n    ? `${classes[\"form-control\"]} ${classes[\"invalid\"]}`\n    : classes[\"form-control\"];\n\n  return (\n    <div className={`${props.className} ${inputClasses} `}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default InputWrap;\n","import classes from \"./Caption.module.css\";\n\nconst Caption = (props) => {\n  return (\n    <h1 className={`${props.className} ${classes.caption} `}>\n      {props.children}\n    </h1>\n  );\n};\n\nexport default Caption;\n","import { useReducer } from \"react\";\n\nconst initialInputState = {\n  value: \"\",\n  isTouched: false,\n};\n\nconst inputStateReducer = (state, action) => {\n  if (action.type === \"INPUT\") {\n    return { value: action.value, isTouched: state.isTouched };\n  }\n  if (action.type === \"BLUR\") {\n    return { isTouched: true, value: state.value };\n  }\n  if (action.type === \"RESET\") {\n    return { isTouched: false, value: \"\" };\n  }\n  return inputStateReducer;\n};\n\nconst useInput = (validateValue) => {\n  const [inputState, dispatch] = useReducer(\n    inputStateReducer,\n    initialInputState\n  );\n\n  const valueIsValid = validateValue(inputState.value);\n  const hasError = !valueIsValid && inputState.isTouched;\n\n  const valueChangeHandler = (event) => {\n    dispatch({ type: \"INPUT\", value: event.target.value });\n  };\n\n  const inputBlurHandler = (event) => {\n    dispatch({ type: \"BLUR\" });\n  };\n\n  const reset = () => {\n    dispatch({ type: \"RESET\" });\n  };\n\n  return {\n    value: inputState.value,\n    hasError,\n    valueChangeHandler,\n    inputBlurHandler,\n    isValid: valueIsValid,\n    reset,\n  };\n};\n\nexport default useInput;\n\nexport const validateEmail = (value) => {\n  //eslint-disable-next-line\n  if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const validatePassword = (value) => {\n  //eslint-disable-next-line\n  if (/(?=.*[0-9a-zA-Z]).{6,}/.test(value)) {\n    return true;\n  } else {\n    return false;\n  }\n};\n","import React, { useEffect, useCallback } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { registerUser } from \"../../redux-store/auth-actions\";\n\nimport classes from \"./SignUp.module.css\";\nimport Card from \"../UI/Card\";\nimport Button from \"../UI/Button\";\nimport InputWrap from \"../UI/forms/InputWrap\";\nimport Caption from \"../UI/Caption\";\nimport LoadingScreen from \"../UI/LoadingScreen\";\n\nimport useInput from \"../../hooks/use-input\";\nimport { validateEmail } from \"../../hooks/use-input\";\nimport { validatePassword } from \"../../hooks/use-input\";\n\nconst Login = (props) => {\n  const registerSuccess = useSelector((state) => state.auth.registerSuccess);\n  const spinnerVisible = useSelector((state) => state.ui.spinner);\n  const dispatch = useDispatch();\n\n  const { history } = props;\n\n  const {\n    value: nameValue,\n    isValid: nameIsValid,\n    hasError: nameHasError,\n    valueChangeHandler: nameChangeHandler,\n    inputBlurHandler: nameBlurHandler,\n    reset: resetName,\n  } = useInput((value) => value.trim() !== \"\");\n  const {\n    value: mailValue,\n    isValid: mailIsValid,\n    hasError: mailHasError,\n    valueChangeHandler: mailChangeHandler,\n    inputBlurHandler: mailBlurHandler,\n    reset: resetMail,\n  } = useInput((value) => validateEmail(value));\n  const {\n    value: passwordValue,\n    isValid: passwordIsValid,\n    hasError: passwordHasError,\n    valueChangeHandler: passwordChangeHandler,\n    inputBlurHandler: passwordBlurHandler,\n    reset: resetPassword,\n  } = useInput((value) => validatePassword(value));\n  const {\n    value: confirmPasswordValue,\n    isValid: confirmPasswordIsValid,\n    hasError: confirmPasswordHasError,\n    valueChangeHandler: confirmPasswordChangeHandler,\n    inputBlurHandler: confirmPasswordBlurHandler,\n    reset: resetconfirmPassword,\n  } = useInput((value) => value === passwordValue && value !== \"\");\n\n  let formIsValid = false;\n\n  if (nameIsValid && mailIsValid && passwordIsValid && confirmPasswordIsValid) {\n    formIsValid = true;\n  }\n\n  const resetForm = useCallback(() => {\n    resetName();\n    resetMail();\n    resetPassword();\n    resetconfirmPassword();\n  }, [resetName, resetMail, resetPassword, resetconfirmPassword]);\n\n  useEffect(() => {\n    if (registerSuccess) {\n      history.push(\"/\");\n      resetForm();\n    }\n  }, [registerSuccess, resetForm, history]);\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n\n    if (formIsValid) {\n      dispatch(registerUser(mailValue, passwordValue, nameValue));\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {spinnerVisible ? (\n        <LoadingScreen />\n      ) : (\n        <Card className={classes.mainwrap}>\n          <div className={classes.scroll}>\n            <Caption>Register</Caption>\n            <form onSubmit={submitHandler}>\n              <InputWrap hasError={nameHasError}>\n                <label htmlFor=\"name\">Name</label>\n                <input\n                  type=\"text\"\n                  id=\"name\"\n                  value={nameValue}\n                  onChange={nameChangeHandler}\n                  onBlur={nameBlurHandler}\n                />\n                {nameHasError && <p>Please enter Your name</p>}\n              </InputWrap>\n              <InputWrap hasError={mailHasError}>\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  value={mailValue}\n                  onChange={mailChangeHandler}\n                  onBlur={mailBlurHandler}\n                />\n                {mailHasError && <p>Please enter valid e-mail</p>}\n              </InputWrap>\n              <InputWrap hasError={passwordHasError}>\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  value={passwordValue}\n                  onChange={passwordChangeHandler}\n                  onBlur={passwordBlurHandler}\n                />\n                {passwordHasError && (\n                  <p>Password must have at least 6 characters</p>\n                )}\n              </InputWrap>\n              <InputWrap hasError={confirmPasswordHasError}>\n                <label htmlFor=\"confirm-password\">Confirm password</label>\n                <input\n                  type=\"password\"\n                  id=\"confirm-password\"\n                  value={confirmPasswordValue}\n                  onChange={confirmPasswordChangeHandler}\n                  onBlur={confirmPasswordBlurHandler}\n                />\n                {confirmPasswordHasError && <p>Passwords do not match</p>}\n              </InputWrap>\n              <Button\n                className={classes.btn}\n                disabled={!formIsValid}\n                type=\"submit\"\n              >\n                Register\n              </Button>\n            </form>\n          </div>\n        </Card>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default withRouter(Login);\n","import SignUp from \"../components/Authentication/SignUp\";\n\nconst Register = () => {\n  return <SignUp />;\n};\n\nexport default Register;\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withRouter } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport classes from \"./SignIn.module.css\";\nimport Card from \"../UI/Card\";\nimport Button from \"../UI/Button\";\nimport InputWrap from \"../UI/forms/InputWrap\";\nimport Caption from \"../UI/Caption\";\nimport LoadingScreen from \"../UI/LoadingScreen\";\n\nimport { loginUser, loginWithGoogleUser } from \"../../redux-store/auth-actions\";\n\nimport { validateEmail } from \"../../hooks/use-input\";\nimport { validatePassword } from \"../../hooks/use-input\";\n\nconst Login = (props) => {\n  const loginSuccess = useSelector((state) => state.auth.loginSuccess);\n  const spinnerVisible = useSelector((state) => state.ui.spinner);\n  const dispatch = useDispatch();\n\n  const [mail, setMail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const { history } = props;\n\n  const resetForm = () => {\n    setMail(\"\");\n    setPassword(\"\");\n  };\n\n  useEffect(() => {\n    if (loginSuccess) {\n      history.push(\"/\");\n      resetForm();\n    }\n  }, [loginSuccess, history]);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if (validateEmail(mail) && validatePassword(password)) {\n      dispatch(loginUser(mail, password));\n    }\n  };\n\n  const mailChangeHandler = (event) => {\n    setMail(event.target.value);\n  };\n\n  const passwordChangeHandler = (event) => {\n    setPassword(event.target.value);\n  };\n\n  const signInWithGoogleHandler = () => {\n    dispatch(loginWithGoogleUser());\n  };\n\n  return (\n    <React.Fragment>\n      {spinnerVisible ? (\n        <LoadingScreen />\n      ) : (\n        <Card className={classes.mainwrap}>\n          <div className={classes.scroll}>\n            <Caption>Login</Caption>\n            <form onSubmit={submitHandler}>\n              <InputWrap>\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  value={mail}\n                  onChange={mailChangeHandler}\n                />\n              </InputWrap>\n              <InputWrap>\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  value={password}\n                  onChange={passwordChangeHandler}\n                />\n              </InputWrap>\n              <div className={classes.resetWrap}>\n                <Link to=\"/resetPassword\">\n                  <p className={classes.reset}>Lost password?</p>\n                </Link>\n              </div>\n              <Button className={classes.btn} type=\"submit\">\n                Login\n              </Button>\n            </form>\n            <Button\n              className={classes.btnGoogle}\n              onClick={signInWithGoogleHandler}\n            >\n              Sign in with Google\n            </Button>\n          </div>\n        </Card>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default withRouter(Login);\n","import SignIn from \"../components/Authentication/SignIn\";\n\nconst Login = () => {\n  return <SignIn />;\n};\n\nexport default Login;\n","import React, { useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport classes from \"./PasswordRecovery.module.css\";\n\nimport Card from \"../UI/Card\";\nimport Button from \"../UI/Button\";\nimport Caption from \"../UI/Caption\";\nimport InputWrap from \"../UI/forms/InputWrap\";\nimport LoadingScreen from \"../UI/LoadingScreen\";\n\nimport { validateEmail } from \"../../hooks/use-input\";\n\nimport { resetPassword } from \"../../redux-store/auth-actions\";\n\nconst PasswordRecovery = (props) => {\n  const dispatch = useDispatch();\n  const resetPasswordSuccess = useSelector(\n    (state) => state.auth.resetPasswordSuccess\n  );\n  const spinnerVisible = useSelector((state) => state.ui.spinner);\n\n  const [mail, setMail] = useState(\"\");\n\n  const { history } = props;\n\n  const mailChangeHandler = (event) => {\n    setMail(event.target.value);\n  };\n\n  useEffect(() => {\n    if (resetPasswordSuccess) {\n      history.push(\"/login\");\n      setMail(\"\");\n    }\n  }, [resetPasswordSuccess, history]);\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    if (validateEmail(mail)) {\n      dispatch(resetPassword(mail));\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {spinnerVisible ? (\n        <LoadingScreen />\n      ) : (\n        <Card className={classes.mainwrap}>\n          <div className={classes.scroll}>\n            <Caption>Reset password</Caption>\n            <form onSubmit={handleFormSubmit}>\n              <InputWrap>\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  value={mail}\n                  onChange={mailChangeHandler}\n                />\n                <Button className={classes.btn} type=\"submit\">\n                  Recover\n                </Button>\n              </InputWrap>\n            </form>\n          </div>\n        </Card>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default withRouter(PasswordRecovery);\n","import PasswordRecovery from \"../components/Authentication/PasswordRecovery\";\n\nconst PasswordReset = () => {\n  return <PasswordRecovery />;\n};\n\nexport default PasswordReset;\n","import classes from \"./OrderItem.module.css\";\n\nconst OrderItem = (props) => {\n  const orderDate = new Date(+props.id);\n\n  const [month, day, year] = [\n    orderDate.getMonth() + 1,\n    orderDate.getDate(),\n    orderDate.getFullYear(),\n  ];\n\n  const orderDateString = `${day}-${month}-${year}`;\n\n  return (\n    <tr className={classes.order}>\n      <td className={classes.totalamount}>{orderDateString}</td>\n      <td className={classes.totalamount}>{props.orderQuantity}</td>\n      <td className={classes.totalamount}>{`$${props.totalAmount.toFixed(\n        2\n      )}`}</td>\n    </tr>\n  );\n};\n\nexport default OrderItem;\n","import React, { useEffect, useState } from \"react\";\n\nimport { CircularProgress } from \"@material-ui/core\";\n\nimport { firestore } from \"../../firebase/utils\";\n\nimport Card from \"../UI/Card\";\nimport classes from \"./Orders.module.css\";\nimport Caption from \"../UI/Caption\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { uiActions } from \"../../redux-store/ui-slice\";\n\nimport OrderItem from \"./OrderItem\";\n\nconst Orders = () => {\n  const dispatch = useDispatch();\n  const orderListRender = useSelector((state) => state.ui.orderListRender);\n\n  const [allOrders, setAllOrders] = useState([]);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  useEffect(() => {\n    const fetchAllBooks = async () => {\n      if (orderListRender) {\n        try {\n          await firestore\n            .collection(\"orders\")\n            .doc(\"D3GQ2qS2JPe6lwdhTarUo31QTJO2\")\n            .collection(\"userorders\")\n            .get()\n            .then((snapshot) => {\n              if (snapshot.empty && snapshot.metadata.fromCache) {\n                throw new Error();\n              }\n              const allOrders = snapshot.docs.map((doc) => {\n                const cartData = JSON.parse(doc.data().cartData);\n                return {\n                  cartData,\n                  id: doc.id,\n                };\n              });\n              setAllOrders(allOrders);\n              console.log(allOrders);\n            });\n        } catch (err) {\n          console.log(err);\n          setErrorMsg(\n            \"Something went wrong. Please check Your internet connection or try again later.\"\n          );\n        }\n      }\n    };\n\n    fetchAllBooks();\n    dispatch(uiActions.setOrderListRender(true));\n  }, [dispatch, orderListRender]);\n\n  const orderList = allOrders.map((order) => (\n    <OrderItem\n      key={order.id}\n      id={order.id}\n      totalAmount={order.cartData.totalAmount}\n      orderQuantity={order.cartData.items.length}\n    />\n  ));\n\n  return (\n    <Card>\n      <div className={classes.scroll}>\n        <Caption>order history</Caption>\n        {allOrders.length > 0 ? (\n          <table className={classes.orders}>\n            <tbody>\n              <tr className={classes.tableheader}>\n                <th>Date</th>\n                <th>Nr</th>\n                <th>Price</th>\n              </tr>\n              {orderList}\n            </tbody>\n          </table>\n        ) : (\n          <React.Fragment>\n            {errorMsg !== \"\" && <h3 className={classes.error}>{errorMsg}</h3>}\n            {errorMsg === \"\" && (\n              <div\n                style={{\n                  position: \"fixed\",\n                  left: \"calc(50% - 2rem)\",\n                  top: \"calc(50% - 0.5rem)\",\n                }}\n              >\n                <CircularProgress size={\"4rem\"} color={\"secondary\"} />\n              </div>\n            )}\n          </React.Fragment>\n        )}\n      </div>\n    </Card>\n  );\n};\n\nexport default Orders;\n","import Orders from \"../components/Orders/Orders\";\n\nconst Orderspage = () => {\n  return <Orders />;\n};\n\nexport default Orderspage;\n","import React, { useEffect } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\n//redux store\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { authActions } from \"./redux-store/auth-slice\";\n\n//layouts\nimport Mainlayout from \"./layouts/Mainlayout\";\n\n//pages\nimport Mainpage from \"./pages/Mainpage\";\nimport Register from \"./pages/Register\";\nimport Login from \"./pages/Login\";\nimport PasswordReset from \"./pages/PasswordReset\";\nimport Orderspage from \"./pages/Orderspage\";\n\nimport { auth, handleNewProfile } from \"./firebase/utils\";\n\nconst App = (props) => {\n  const dispatch = useDispatch();\n  const currentUser = useSelector((state) => state.auth.currentUser);\n\n  useEffect(() => {\n    const authListener = auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const userRef = await handleNewProfile(userAuth);\n        userRef.onSnapshot((snapshot) => {\n          dispatch(\n            authActions.setCurrentUser({ id: snapshot.id, ...snapshot.data() })\n          );\n        });\n      }\n      dispatch(authActions.setCurrentUser(null));\n    });\n    return () => authListener();\n  }, [dispatch]);\n\n  return (\n    <React.Fragment>\n      <Switch>\n        <Route\n          path=\"/register\"\n          render={() =>\n            currentUser ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <Mainlayout>\n                <Register />\n              </Mainlayout>\n            )\n          }\n        />\n        <Route\n          path=\"/login\"\n          render={() =>\n            currentUser ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <Mainlayout>\n                <Login />\n              </Mainlayout>\n            )\n          }\n        />\n        <Route\n          path=\"/resetPassword\"\n          render={() =>\n            currentUser ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <Mainlayout>\n                <PasswordReset />\n              </Mainlayout>\n            )\n          }\n        />\n        <Route\n          path=\"/orders\"\n          render={() =>\n            !currentUser ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <Mainlayout>\n                <Orderspage />\n              </Mainlayout>\n            )\n          }\n        />\n        <Route\n          path=\"/\"\n          render={() => (\n            <Mainlayout>\n              <Mainpage />\n            </Mainlayout>\n          )}\n        />\n      </Switch>\n    </React.Fragment>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\n\nimport authSlice from \"./auth-slice\";\nimport uiSlice from \"./ui-slice\";\n\nconst store = configureStore({\n  reducer: { auth: authSlice.reducer, ui: uiSlice.reducer },\n});\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n// import reportWebVitals from \"./reportWebVitals\";\nimport { HashRouter } from \"react-router-dom\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./redux-store/index\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter basename=\"/\">\n        <App />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}