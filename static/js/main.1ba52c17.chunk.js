(this["webpackJsonpbookshop-prod-react"]=this["webpackJsonpbookshop-prod-react"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n(51),c=Object(r.b)({name:"ui",initialState:{spinner:null,notification:null,popup:!1,mobileNavMenu:!1,orderListRender:!0},reducers:{showSpinner:function(e,t){e.spinner=t.payload},setNotification:function(e,t){e.notification={status:t.payload.status,message:t.payload.message}},setPopup:function(e,t){e.popup=t.payload},setMobileNavMenu:function(e,t){e.mobileNavMenu=t.payload},setOrderListRender:function(e,t){e.orderListRender=t.payload}}});t.a=c;var a=c.actions},,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return b}));var r=n(0),c=n.n(r),a=n(30),s=n(1),o=n(57);n(123),n(117);o.a.initializeApp({apiKey:"AIzaSyDKWKsqJ1vgUss06Laxv8_mO414ZFSGXpk",authDomain:"react-bookshop-4ca2f.firebaseapp.com",projectId:"react-bookshop-4ca2f",storageBucket:"react-bookshop-4ca2f.appspot.com",messagingSenderId:"633472712977",appId:"1:633472712977:web:f3fa9651dac7b2142d0cb0"});var i=o.a.auth(),u=o.a.firestore(),l=new o.a.auth.GoogleAuthProvider;l.setCustomParameters({prompt:"select_account"});var j=function(){return i.signInWithPopup(l)},d=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,s,o,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=t.uid,s=t.displayName,o=t.email,i=u.doc("users/".concat(r)),e.next=6,i.get();case 6:if(e.sent.exists){e.next=17;break}return l=(new Date).getTime(),e.prev=9,e.next=12,i.set(Object(a.a)({displayName:s,email:o,createdDate:l},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log(e.t0);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=(new Date).getTime(),a=u.doc("userdata/".concat(t,"/userorders/").concat(r)),e.prev=4,e.next=7,a.set({cartData:JSON.stringify(n)});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}()},,,,,,,,,,,function(e,t,n){"use strict";var r=n(87),c=n.n(r),a=n(3);t.a=function(e){return Object(a.jsx)("button",{type:e.type||"button",className:"".concat(e.className," ").concat(c.a.button," "),onClick:e.onClick,disabled:e.disabled||!1,children:e.children})}},,,,,,,function(e,t,n){e.exports={active:"NavLinks_active__133j8",navbtn:"NavLinks_navbtn__2x9ew"}},,,function(e,t,n){e.exports={mainwrap:"SignIn_mainwrap__2EbRg",scroll:"SignIn_scroll__38gae",btn:"SignIn_btn__I-4z1",btnGoogle:"SignIn_btnGoogle__2iKmU",resetWrap:"SignIn_resetWrap__29k2b",reset:"SignIn_reset__2Q5WU"}},function(e,t,n){"use strict";var r=n(5),c=n.n(r).a.createContext({items:[],totalAmount:0,clearCart:function(){},addItem:function(e){},removeWholeItem:function(e){},removeOneItem:function(e){}});t.a=c},,,,,function(e,t,n){e.exports={book:"BookItem_book__5vnL1",price:"BookItem_price__1jQEL",moreinfo:"BookItem_moreinfo__1pP5a",name:"BookItem_name__3W6eH",shake:"BookItem_shake__1yLAw"}},,,,function(e,t,n){e.exports={scroll:"Books_scroll__24MDJ",searchheader:"Books_searchheader__2QJMd",titlesearchbar:"Books_titlesearchbar__3hQ2U",error:"Books_error__CFydQ"}},,function(e,t,n){e.exports={totalAmount:"OrderDetails_totalAmount__6SjF8",scroll:"OrderDetails_scroll__PSQQF",finalrow:"OrderDetails_finalrow__1gSB1"}},function(e,t,n){e.exports={menu:"MobileNavigation_menu__1Nr9m",mobileNav:"MobileNavigation_mobileNav__2DNHw",popupMenu:"MobileNavigation_popupMenu__1WdEH"}},,function(e,t,n){"use strict";var r=n(88),c=n.n(r),a=n(3);t.a=function(e){return Object(a.jsx)("div",{className:c.a.backdrop,onClick:e.onClick})}},,,,,,,,,function(e,t,n){e.exports={form:"BookItemForm_form__Zzh86",select:"BookItemForm_select__3n7TT",item:"BookItemForm_item__2KFqX"}},function(e,t,n){e.exports={detailsmodal:"BookDetails_detailsmodal__2Of-5","details-appear":"BookDetails_details-appear__kIAQJ",details:"BookDetails_details__HmNdv",btn:"BookDetails_btn__1ntyc"}},function(e,t,n){e.exports={scroll:"SignUp_scroll__2wpKi",mainwrap:"SignUp_mainwrap__j_HHg",btn:"SignUp_btn__CwJwc"}},function(e,t,n){e.exports={"form-control":"InputWrap_form-control__3yjlN",invalid:"InputWrap_invalid__2tGH-"}},function(e,t,n){e.exports={mainwrap:"PasswordRecovery_mainwrap__3aBko",btn:"PasswordRecovery_btn__wWhOd",scroll:"PasswordRecovery_scroll__gOUFJ"}},function(e,t,n){e.exports={header:"Header_header__1VCKf",navlinks:"Header_navlinks__2XzKG"}},function(e,t,n){e.exports={cart:"HeaderBtn_cart__2SqFc",icon:"HeaderBtn_icon__3bQ4x",bump:"HeaderBtn_bump__2w7kt"}},function(e,t,n){e.exports={notification:"FormSubmissionPopup_notification__2BwXG",error:"FormSubmissionPopup_error__Lhi_4",success:"FormSubmissionPopup_success__1k1JD"}},,,,,,,,function(e,t,n){e.exports={scroll:"Orders_scroll__1Wera",error:"Orders_error__H6CPw"}},function(e,t,n){e.exports={card:"Card_card__1m44e"}},function(e,t,n){e.exports={button:"Button_button__6-R6B"}},function(e,t,n){e.exports={backdrop:"Backdrop_backdrop__1uHu4"}},,,,,function(e,t,n){e.exports={caption:"Caption_caption__3jnYN"}},function(e,t,n){e.exports={"main-image":"BackgroundImage_main-image__w64W_"}},,function(e,t,n){e.exports={table:"Table_table__TN-qc"}},function(e,t,n){e.exports={tableheader:"TableHeader_tableheader__2x_CQ"}},function(e,t,n){e.exports={orderitem:"OrderItem_orderitem__32WQH"}},function(e,t,n){e.exports={tablerow:"TableRow_tablerow__37u9-"}},function(e,t,n){e.exports={navigation:"Navigation_navigation__11jj5"}},function(e,t,n){e.exports={button:"NavButton_button__1qdXz"}},,,,,,,,,function(e,t,n){},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(5),c=n.n(r),a=n(39),s=n.n(a),o=(n(110),n(0)),i=n.n(o),u=n(30),l=n(1),j=n(20),d=n(15),b=n(51),m=null===localStorage.getItem("currentUser")?null:JSON.parse(localStorage.getItem("currentUser")),p=Object(b.b)({name:"auth",initialState:{currentUser:m,loginSuccess:!1,registerSuccess:!1,resetPasswordSuccess:!1},reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload},setLoginSuccess:function(e,t){e.loginSuccess=t.payload},setRegisterSuccess:function(e,t){e.registerSuccess=t.payload},setResetPasswordSuccess:function(e,t){e.resetPasswordSuccess=t.payload}}}),f=p.actions,h=p,O=n(14),x=n(56),v=n.n(x),g=n(86),_=n.n(g),w=n(3),N=function(e){return Object(w.jsx)("div",{className:"".concat(e.className," ").concat(_.a.card," "),children:e.children})},k=n(47),S=n(52),y=n.n(S),C=n(70),E=n.n(C),I=n(36),P=function(e){var t=Object(r.useState)("paper"),n=Object(O.a)(t,2),c=n[0],a=n[1],s=0,o=0;return Object(w.jsxs)("form",{className:E.a.form,onSubmit:function(t){t.preventDefault(),"paper"===c?e.onAdd(c,++s):e.onAdd(c,++o)},children:[Object(w.jsxs)("select",{value:c,name:"booktype",className:E.a.select,onChange:function(e){a(e.target.value)},children:[Object(w.jsx)("option",{value:"ebook",children:"E-book"}),Object(w.jsx)("option",{value:"paper",children:"Paper"})]}),Object(w.jsx)(I.a,{type:"submit",className:E.a.item,children:"+ Add"})]})},B=n(71),A=n.n(B),F=n(61),R=function(e){return Object(w.jsxs)(c.a.Fragment,{children:[Object(w.jsxs)("div",{className:A.a.detailsmodal,children:[Object(w.jsxs)("div",{className:A.a.details,children:[Object(w.jsx)("h1",{children:e.name}),e.details]}),Object(w.jsx)(I.a,{className:A.a.btn,onClick:e.onClose,children:"OK"})]}),Object(w.jsx)(F.a,{onClick:e.onClose})]})},U=n(16),D=function(e){var t=Object(d.b)(),n=Object(d.c)((function(e){return e.auth.currentUser})),c=Object(r.useContext)(k.a),a=Object(r.useState)(!1),s=Object(O.a)(a,2),o=s[0],i=s[1],u=Object(r.useState)(!1),l=Object(O.a)(u,2),j=l[0],b=l[1],m="".concat(y.a.name," ").concat(o?y.a.shake:"");return Object(r.useEffect)((function(){var e=setTimeout((function(){i(!1)}),300);return function(){clearTimeout(e)}}),[o]),Object(w.jsxs)("li",{className:y.a.book,children:[Object(w.jsx)("h1",{className:m,children:e.name}),Object(w.jsxs)("div",{className:y.a.price,children:["$",e.price.toFixed(2)]}),Object(w.jsx)("div",{className:y.a.moreinfo,onClick:function(){b(!0)},children:"more info"}),j&&Object(w.jsx)(R,{name:e.name,details:e.details,onClose:function(){b(!1)}}),Object(w.jsx)("div",{children:Object(w.jsx)(P,{id:e.id,onAdd:function(r,a){n?(c.addItem({id:"".concat(e.id,"_").concat(r),name:e.name,price:e.price,type:r,amount:a}),i(!0)):(t(U.b.setNotification({status:"error",message:"Please log in!"})),t(U.b.setPopup(!0)))},formStatus:o})})]})},L=n(136),H=n(25),M=function(e){var t=Object(r.useState)(""),n=Object(O.a)(t,2),a=n[0],s=n[1],o=Object(r.useState)([]),j=Object(O.a)(o,2),d=j[0],b=j[1],m=Object(r.useState)(""),p=Object(O.a)(m,2),f=p[0],h=p[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.c.collection("books").get().then((function(e){if(e.metadata.fromCache)throw new Error;var t=e.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})}));b(t)}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),h("Something went wrong. Please check Your internet connection or try again later.");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var x=d.filter((function(e){return(""===a||!!e.name.toLowerCase().includes(a.toLowerCase()))&&e})).map((function(e){return Object(w.jsx)(D,{id:e.id,name:e.name,price:e.price,details:e.details},e.id)}));return Object(w.jsxs)(N,{children:[Object(w.jsx)("div",{className:v.a.searchheader,children:Object(w.jsx)("input",{placeholder:"Search title...",type:"text",onChange:function(e){s(e.target.value)},className:v.a.titlesearchbar,maxLength:"20"})}),Object(w.jsx)("div",{className:v.a.scroll,children:d.length>0?Object(w.jsx)("ul",{children:x}):Object(w.jsxs)(c.a.Fragment,{children:[""!==f&&Object(w.jsx)("h3",{className:v.a.error,children:f}),""===f&&Object(w.jsx)("div",{style:{position:"fixed",left:"calc(50% - 2rem)",top:"calc(50% - 0.5rem)"},children:Object(w.jsx)(L.a,{size:"4rem",color:"secondary"})})]})})]})},T=function(){return Object(w.jsx)(M,{})},W=function(e,t,n){return function(){var r=Object(l.a)(i.a.mark((function r(c){var a,s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c(U.b.showSpinner(!0)),r.next=4,H.b.createUserWithEmailAndPassword(e,t);case 4:return a=r.sent,s=a.user,r.next=8,Object(H.d)(s,{displayName:n});case 8:c(f.setRegisterSuccess(!0)),c(U.b.setNotification({status:"success",message:"Registered!"})),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),console.log(r.t0.message),c(U.b.setNotification({status:"error",message:"Something went wrong!"}));case 16:c(U.b.setPopup(!0)),c(f.setRegisterSuccess(!1)),c(U.b.showSpinner(!1));case 19:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(U.b.showSpinner(!0)),r={url:"http://localhost:3000/login"},t.next=5,H.b.sendPasswordResetEmail(e,r);case 5:n(U.b.setNotification({status:"success",message:"Password reset!"})),n(f.setResetPasswordSuccess(!0)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),n(U.b.setNotification({status:"error",message:"Something went wrong!"}));case 13:n(U.b.setPopup(!0)),n(f.setResetPasswordSuccess(!1)),n(U.b.showSpinner(!1));case 16:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},z=n(72),Q=n.n(z),V=n(73),G=n.n(V),K=function(e){var t=e.hasError?"".concat(G.a["form-control"]," ").concat(G.a.invalid):G.a["form-control"];return Object(w.jsx)("div",{className:"".concat(e.className," ").concat(t," "),children:e.children})},Y=n(93),q=n.n(Y),X=function(e){return Object(w.jsx)("h1",{className:"".concat(e.className," ").concat(q.a.caption," "),children:e.children})},$=n.p+"static/media/background_books_image.3a124e66.jpg",Z=n(94),ee=n.n(Z),te=function(){return Object(w.jsx)("div",{className:ee.a["main-image"],children:Object(w.jsx)("img",{src:$,alt:"books"})})},ne=function(){return Object(w.jsxs)(c.a.Fragment,{children:[Object(w.jsx)(F.a,{}),Object(w.jsx)("div",{style:{position:"fixed",left:"calc(50% - 2rem)",top:"calc(50% - 2rem)"},children:Object(w.jsx)(L.a,{size:"4rem",color:"secondary"})}),Object(w.jsx)(te,{})]})},re={value:"",isTouched:!1},ce=function e(t,n){return"INPUT"===n.type?{value:n.value,isTouched:t.isTouched}:"BLUR"===n.type?{isTouched:!0,value:t.value}:"RESET"===n.type?{isTouched:!1,value:""}:e},ae=function(e){var t=Object(r.useReducer)(ce,re),n=Object(O.a)(t,2),c=n[0],a=n[1],s=e(c.value),o=!s&&c.isTouched;return{value:c.value,hasError:o,valueChangeHandler:function(e){a({type:"INPUT",value:e.target.value})},inputBlurHandler:function(e){a({type:"BLUR"})},isValid:s,reset:function(){a({type:"RESET"})}}},se=function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},oe=function(e){return!!/(?=.*[0-9a-zA-Z]).{6,}/.test(e)},ie=Object(j.g)((function(e){var t=Object(d.c)((function(e){return e.auth.registerSuccess})),n=Object(d.c)((function(e){return e.ui.spinner})),a=Object(d.b)(),s=e.history,o=ae((function(e){return""!==e.trim()})),u=o.value,j=o.isValid,b=o.hasError,m=o.valueChangeHandler,p=o.inputBlurHandler,f=o.reset,h=ae((function(e){return se(e)})),O=h.value,x=h.isValid,v=h.hasError,g=h.valueChangeHandler,_=h.inputBlurHandler,k=h.reset,S=ae((function(e){return oe(e)})),y=S.value,C=S.isValid,E=S.hasError,P=S.valueChangeHandler,B=S.inputBlurHandler,A=S.reset,F=ae((function(e){return e===y&&""!==e})),R=F.value,U=F.isValid,D=F.hasError,L=F.valueChangeHandler,H=F.inputBlurHandler,M=F.reset,T=!1;j&&x&&C&&U&&(T=!0);var J=Object(r.useCallback)((function(){f(),k(),A(),M()}),[f,k,A,M]);Object(r.useEffect)((function(){t&&(s.push("/"),J())}),[t,J,s]);var z=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),T&&a(W(O,y,u));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(c.a.Fragment,{children:n?Object(w.jsx)(ne,{}):Object(w.jsx)(N,{className:Q.a.mainwrap,children:Object(w.jsxs)("div",{className:Q.a.scroll,children:[Object(w.jsx)(X,{children:"Register"}),Object(w.jsxs)("form",{onSubmit:z,children:[Object(w.jsxs)(K,{hasError:b,children:[Object(w.jsx)("label",{htmlFor:"name",children:"Name"}),Object(w.jsx)("input",{type:"text",id:"name",value:u,onChange:m,onBlur:p}),b&&Object(w.jsx)("p",{children:"Please enter Your name"})]}),Object(w.jsxs)(K,{hasError:v,children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",id:"email",value:O,onChange:g,onBlur:_}),v&&Object(w.jsx)("p",{children:"Please enter valid e-mail"})]}),Object(w.jsxs)(K,{hasError:E,children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{type:"password",id:"password",value:y,onChange:P,onBlur:B}),E&&Object(w.jsx)("p",{children:"Password must have at least 6 characters"})]}),Object(w.jsxs)(K,{hasError:D,children:[Object(w.jsx)("label",{htmlFor:"confirm-password",children:"Confirm password"}),Object(w.jsx)("input",{type:"password",id:"confirm-password",value:R,onChange:L,onBlur:H}),D&&Object(w.jsx)("p",{children:"Passwords do not match"})]}),Object(w.jsx)(I.a,{className:Q.a.btn,disabled:!T,type:"submit",children:"Register"})]})]})})})})),ue=function(){return Object(w.jsx)(ie,{})},le=n(24),je=n(46),de=n.n(je),be=Object(j.g)((function(e){var t=Object(d.c)((function(e){return e.auth.loginSuccess})),n=Object(d.c)((function(e){return e.ui.spinner})),a=Object(d.b)(),s=Object(r.useState)(""),o=Object(O.a)(s,2),u=o[0],j=o[1],b=Object(r.useState)(""),m=Object(O.a)(b,2),p=m[0],h=m[1],x=e.history;Object(r.useEffect)((function(){t&&(x.push("/"),j(""),h(""))}),[t,x]);return Object(w.jsx)(c.a.Fragment,{children:n?Object(w.jsx)(ne,{}):Object(w.jsx)(N,{className:de.a.mainwrap,children:Object(w.jsxs)("div",{className:de.a.scroll,children:[Object(w.jsx)(X,{children:"Login"}),Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),se(u)&&oe(p)&&a(function(e,t){return function(){var n=Object(l.a)(i.a.mark((function n(r){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(U.b.showSpinner(!0)),n.next=4,H.b.signInWithEmailAndPassword(e,t);case 4:r(f.setLoginSuccess(!0)),r(U.b.setNotification({status:"success",message:"Logged in!"})),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0.message),r(U.b.setNotification({status:"error",message:"Something went wrong!"}));case 12:r(U.b.setPopup(!0)),r(f.setLoginSuccess(!1)),r(U.b.showSpinner(!1));case 15:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(u,p))},children:[Object(w.jsxs)(K,{children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",id:"email",value:u,onChange:function(e){j(e.target.value)}})]}),Object(w.jsxs)(K,{children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{type:"password",id:"password",value:p,onChange:function(e){h(e.target.value)}})]}),Object(w.jsx)("div",{className:de.a.resetWrap,children:Object(w.jsx)(le.b,{to:"/resetPassword",children:Object(w.jsx)("p",{className:de.a.reset,children:"Lost password?"})})}),Object(w.jsx)(I.a,{className:de.a.btn,type:"submit",children:"Login"})]}),Object(w.jsx)(I.a,{className:de.a.btnGoogle,onClick:function(){a(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(U.b.showSpinner(!0)),e.next=4,Object(H.e)();case 4:t(f.setLoginSuccess(!0)),t(U.b.setNotification({status:"success",message:"Logged in!"})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),t(U.b.setNotification({status:"error",message:"Something went wrong!"}));case 12:t(U.b.setPopup(!0)),t(f.setLoginSuccess(!1)),t(U.b.showSpinner(!1));case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())},children:"Sign in with Google"})]})})})})),me=function(){return Object(w.jsx)(be,{})},pe=n(74),fe=n.n(pe),he=Object(j.g)((function(e){var t=Object(d.b)(),n=Object(d.c)((function(e){return e.auth.resetPasswordSuccess})),a=Object(d.c)((function(e){return e.ui.spinner})),s=Object(r.useState)(""),o=Object(O.a)(s,2),u=o[0],j=o[1],b=e.history;Object(r.useEffect)((function(){n&&(b.push("/login"),j(""))}),[n,b]);var m=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),se(u)&&t(J(u));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(c.a.Fragment,{children:a?Object(w.jsx)(ne,{}):Object(w.jsx)(N,{className:fe.a.mainwrap,children:Object(w.jsxs)("div",{className:fe.a.scroll,children:[Object(w.jsx)(X,{children:"Reset password"}),Object(w.jsx)("form",{onSubmit:m,children:Object(w.jsxs)(K,{children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",id:"email",value:u,onChange:function(e){j(e.target.value)}}),Object(w.jsx)(I.a,{className:fe.a.btn,type:"submit",children:"Recover"})]})})]})})})})),Oe=function(){return Object(w.jsx)(he,{})},xe=n(85),ve=n.n(xe),ge=n(96),_e=n.n(ge),we=function(e){return Object(w.jsx)("table",{className:"".concat(e.className," ").concat(_e.a.table," "),children:e.children})},Ne=n(97),ke=n.n(Ne),Se=function(e){return Object(w.jsx)("tr",{className:"".concat(e.className," ").concat(ke.a.tableheader," "),children:e.children})},ye=n(98),Ce=n.n(ye),Ee=n(99),Ie=n.n(Ee),Pe=function(e){return Object(w.jsx)("tr",{className:"".concat(e.className," ").concat(Ie.a.tablerow," "),onClick:e.onClick,children:e.children})},Be=Object(j.g)((function(e){var t=new Date(+e.id),n=[t.getMonth()+1,t.getDate(),t.getFullYear()],r=n[0],c=n[1],a=n[2],s=r<10?"0"+r:""+r,o="".concat(c<10?"0"+c:""+c,"-").concat(s,"-").concat(a),i=e.history;return Object(w.jsxs)(Pe,{onClick:function(){i.push({pathname:"/orders/".concat(e.id)})},className:Ce.a.orderitem,children:[Object(w.jsx)("td",{children:o}),Object(w.jsx)("td",{children:e.orderQuantity}),Object(w.jsx)("td",{children:"$".concat(e.totalAmount.toFixed(2))})]})})),Ae=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.orderListRender})),n=Object(d.c)((function(e){return e.auth.currentUser})),a=Object(r.useState)([]),s=Object(O.a)(a,2),o=s[0],u=s[1],j=Object(r.useState)(""),b=Object(O.a)(j,2),m=b[0],p=b[1],f=n.id;Object(r.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.prev=1,e.next=4,H.c.collection("userdata").doc(f).collection("userorders").get().then((function(e){if(e.metadata.fromCache)throw new Error("no internet");if(e.empty)throw new Error("no orders");var t=e.docs.map((function(e){return{cartData:JSON.parse(e.data().cartData),id:e.id}}));u(t)}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),"no internet"===e.t0.message&&p("Something went wrong. Please check Your internet connection or try again later."),"no orders"===e.t0.message&&p("No order has been made yet!");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}})()(),e(U.b.setOrderListRender(!0))}),[e,t,f]);var h=o.map((function(e){return Object(w.jsx)(Be,{id:e.id,totalAmount:e.cartData.totalAmount,orderQuantity:e.cartData.items.length},e.id)}));return Object(w.jsx)(N,{children:Object(w.jsxs)("div",{className:ve.a.scroll,children:[Object(w.jsx)(X,{children:"order history"}),o.length>0?Object(w.jsx)(we,{children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)(Se,{children:[Object(w.jsx)("th",{children:"Date"}),Object(w.jsx)("th",{children:"Amount"}),Object(w.jsx)("th",{children:"Price"})]}),h]})}):Object(w.jsxs)(c.a.Fragment,{children:[""!==m&&Object(w.jsx)("h3",{className:ve.a.error,children:m}),""===m&&Object(w.jsx)("div",{style:{position:"fixed",left:"calc(50% - 2rem)",top:"calc(50% - 0.5rem)"},children:Object(w.jsx)(L.a,{size:"4rem",color:"secondary"})})]})]})})},Fe=function(){return Object(w.jsx)(Ae,{})},Re=n(58),Ue=n.n(Re),De=function(e){return Object(w.jsxs)(Pe,{children:[Object(w.jsxs)("td",{children:['"',e.name,'" - in ',e.type]}),Object(w.jsx)("td",{children:"$".concat(e.price.toFixed(2))}),Object(w.jsx)("td",{children:e.amount})]})},Le=Object(j.g)((function(e){var t=Object(d.c)((function(e){return e.auth.currentUser})),n=Object(r.useState)([]),a=Object(O.a)(n,2),s=a[0],o=a[1],u=Object(r.useState)(""),j=Object(O.a)(u,2),b=j[0],m=j[1],p=t.id,f=e.location.pathname.substring(e.location.pathname.lastIndexOf("/")+1);Object(r.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.c.collection("userdata").doc(p).collection("userorders").get().then((function(e){if(e.metadata.fromCache)throw new Error("no internet");var t;if(e.docs.forEach((function(e){e.id===f&&(t=JSON.parse(e.data().cartData),o(t))})),!t)throw new Error("no orders")}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),"no internet"===e.t0.message&&m("Something went wrong. Please check Your internet connection or try again later."),"no orders"===e.t0.message&&m("No order has been made yet!");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}})()()}),[p,f]);var h=s.items?s.items.map((function(e){return Object(w.jsx)(De,{name:e.name,price:e.price,type:e.type,amount:e.amount},e.id)})):[];return Object(w.jsx)(N,{children:Object(w.jsxs)("div",{className:Ue.a.scroll,children:[Object(w.jsx)(X,{children:"order details"}),h.length>0?Object(w.jsx)(we,{children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)(Se,{children:[Object(w.jsx)("th",{children:"Name"}),Object(w.jsx)("th",{children:"Price"}),Object(w.jsx)("th",{children:"Amount"})]}),h,Object(w.jsxs)(Pe,{className:Ue.a.finalrow,children:[Object(w.jsx)("td",{}),Object(w.jsxs)("td",{className:Ue.a.totalAmount,children:["$",s.totalAmount.toFixed(2)]}),Object(w.jsx)("td",{})]})]})}):Object(w.jsxs)(c.a.Fragment,{children:[""!==b&&Object(w.jsx)("h3",{className:Ue.a.error,children:b}),""===b&&Object(w.jsx)("div",{style:{position:"fixed",left:"calc(50% - 2rem)",top:"calc(50% - 0.5rem)"},children:Object(w.jsx)(L.a,{size:"4rem",color:"secondary"})})]})]})})})),He=function(){return Object(w.jsx)(Le,{})},Me=n(75),Te=n.n(Me),We=n(100),Je=n.n(We),ze=n(101),Qe=n.n(ze),Ve=function(e){return Object(w.jsx)("button",{type:e.type||"button",className:"".concat(e.className," ").concat(Qe.a.button," "),onClick:e.onClick,children:e.children})},Ge=n(43),Ke=n.n(Ge),Ye=function(e){var t=Object(d.c)((function(e){return e.auth.currentUser})),n=Object(d.b)(),r=function(){n(U.b.setMobileNavMenu(!1))};return Object(w.jsxs)(c.a.Fragment,{children:[!t&&Object(w.jsxs)(c.a.Fragment,{children:[Object(w.jsx)(le.c,{to:"/register",activeClassName:Ke.a.active,onClick:r,children:Object(w.jsx)(Ve,{className:Ke.a.navbtn,children:"Register"})}),Object(w.jsx)(le.c,{to:"/login",activeClassName:Ke.a.active,onClick:r,children:Object(w.jsx)(Ve,{className:Ke.a.navbtn,children:"Login"})})]}),t&&Object(w.jsxs)(c.a.Fragment,{children:[Object(w.jsx)(Ve,{className:Ke.a.navbtn,onClick:function(){H.b.signOut(),r()},children:"Logout"}),Object(w.jsx)(le.c,{to:"/orders",activeClassName:Ke.a.active,onClick:r,children:Object(w.jsx)(Ve,{className:Ke.a.navbtn,children:"Orders"})})]})]})},qe=function(){return Object(w.jsx)("div",{className:Je.a.navigation,children:Object(w.jsx)(Ye,{})})},Xe=n(59),$e=n.n(Xe),Ze=n(102),et=n.n(Ze),tt=n(103),nt=n.n(tt),rt=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.mobileNavMenu}));return Object(w.jsxs)(c.a.Fragment,{children:[!t&&Object(w.jsx)("div",{className:$e.a.menu,children:Object(w.jsx)(et.a,{fontSize:"large",onClick:function(){e(U.b.setMobileNavMenu(!0))}})}),t&&Object(w.jsx)("div",{className:$e.a.menu,children:Object(w.jsx)(nt.a,{fontSize:"large",onClick:function(){e(U.b.setMobileNavMenu(!1))}})}),s.a.createPortal(Object(w.jsx)("div",{className:$e.a.mobileNav,children:t&&Object(w.jsx)("div",{className:$e.a.popupMenu,children:Object(w.jsx)(Ye,{})})}),document.getElementById("overlay"))]})},ct=n(104),at=n.n(ct),st=n(137),ot=n(76),it=n.n(ot),ut=function(e){var t=Object(r.useContext)(k.a),n=Object(r.useState)(!1),c=Object(O.a)(n,2),a=c[0],s=c[1],o=t.items.reduce((function(e,t){return e+t.amount}),0),i="".concat(it.a.icon," ").concat(a?it.a.bump:"");return Object(r.useEffect)((function(){if(0!==o){s(!0);var e=setTimeout((function(){s(!1)}),300);return function(){clearTimeout(e)}}}),[t.items,o]),Object(w.jsx)(st.a,{showZero:!0,badgeContent:o,color:"primary",onClick:e.onClick,className:it.a.cart,children:Object(w.jsx)(at.a,{fontSize:"large",className:i})})},lt=function(e){var t=Object(d.c)((function(e){return e.auth.currentUser})),n=Object(d.b)();return Object(w.jsxs)(c.a.Fragment,{children:[Object(w.jsxs)("header",{className:Te.a.header,children:[Object(w.jsx)(le.b,{to:"/",style:{textDecoration:"none"},children:Object(w.jsx)("h1",{className:Te.a.bookshopcaption,onClick:function(){n(U.b.setMobileNavMenu(!1))},children:"Bookshop"})}),Object(w.jsxs)("div",{className:Te.a.navlinks,children:[Object(w.jsx)(qe,{}),Object(w.jsx)(rt,{}),t&&Object(w.jsx)(ut,{onClick:e.onOpen})]})]}),Object(w.jsx)(te,{})]})},jt=n(28),dt=null===localStorage.getItem("cart")?{items:[],totalAmount:0}:JSON.parse(localStorage.getItem("cart")),bt=function(e,t){if("ADD"===t.type){var n,r=e.totalAmount+t.item.price,c=e.items.findIndex((function(e){return e.id===t.item.id})),a=e.items[c];if(a){var s=Object(u.a)(Object(u.a)({},a),{},{amount:a.amount+1});(n=Object(jt.a)(e.items))[c]=s}else n=e.items.concat(t.item);return localStorage.setItem("cart",JSON.stringify({items:n,totalAmount:r})),{items:n,totalAmount:r}}if("REMOVE_WHOLE"===t.type){var o=e.items.findIndex((function(e){return e.id===t.id})),i=e.items[o],l=e.totalAmount-i.price*i.amount;l=l<0?0:l;var j=e.items.filter((function(e){return e.id!==t.id}));return localStorage.setItem("cart",JSON.stringify({items:j,totalAmount:l})),{items:j,totalAmount:l}}if("REMOVE_ONE"===t.type){var d,b=e.items.findIndex((function(e){return e.id===t.id})),m=e.items[b],p=e.totalAmount-m.price;if(p=p<0?0:p,1===m.amount)d=e.items.filter((function(e){return e.id!==t.id}));else{var f=Object(u.a)(Object(u.a)({},m),{},{amount:m.amount-1});(d=Object(jt.a)(e.items))[b]=f}return localStorage.setItem("cart",JSON.stringify({items:d,totalAmount:p})),{items:d,totalAmount:p}}return"CLEAR"===t.type?(localStorage.setItem("cart",JSON.stringify({items:[],totalAmount:0})),{items:[],totalAmount:0}):dt},mt=function(e){var t=Object(r.useReducer)(bt,dt),n=Object(O.a)(t,2),c=n[0],a=n[1],s={items:c.items,totalAmount:c.totalAmount,clearCart:function(){a({type:"CLEAR"})},addItem:function(e){a({type:"ADD",item:e})},removeWholeItem:function(e){a({type:"REMOVE_WHOLE",id:e})},removeOneItem:function(e){a({type:"REMOVE_ONE",id:e})}};return Object(w.jsx)(k.a.Provider,{value:s,children:e.children})},pt=n(77),ft=n.n(pt),ht=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],s=Object(d.c)((function(e){return e.ui.popup})),o=Object(d.c)((function(e){return e.ui.notification})),i="".concat(ft.a.notification," ").concat(n);return Object(r.useEffect)((function(){if(o){var e=o.status;"error"===e&&a(ft.a.error),"success"===e&&a(ft.a.success)}}),[o]),Object(w.jsx)(c.a.Fragment,{children:s?Object(w.jsx)("div",{className:i,children:o.message}):""})},Ot=c.a.lazy((function(){return n.e(3).then(n.bind(null,144))})),xt=c.a.lazy((function(){return n.e(4).then(n.bind(null,143))})),vt=function(e){var t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),o=Object(O.a)(s,2),i=o[0],l=o[1],j=Object(d.c)((function(e){return e.ui.popup})),b=Object(d.b)();return Object(r.useEffect)((function(){if(j){var e=setTimeout((function(){b(U.b.setPopup(!1))}),4e3);return function(){return clearTimeout(e)}}}),[j,b]),Object(w.jsx)(r.Suspense,{fallback:Object(w.jsx)(ne,{}),children:Object(w.jsxs)(mt,{children:[Object(w.jsx)(lt,Object(u.a)({onOpen:function(){a(!0)}},e)),Object(w.jsx)(ht,{}),e.children,c&&Object(w.jsx)(Ot,{onClose:function(){a(!1)},onOrderModalToggle:function(){l(!0)}}),i&&Object(w.jsx)(xt,{onClick:function(){l(!1)}})]})})},gt=function(e){var t=e.currentUser,n=e.path,r=e.component;return Object(w.jsx)(j.b,{path:n,render:function(){return t?Object(w.jsx)(j.a,{to:"/"}):Object(w.jsx)(vt,{children:r})}})},_t=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.currentUser}));return Object(r.useEffect)((function(){var t=H.b.onAuthStateChanged(function(){var t=Object(l.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,Object(H.d)(n);case 3:t.sent.onSnapshot((function(t){e(f.setCurrentUser(Object(u.a)({id:t.id},t.data())))})),t.next=8;break;case 7:n||e(f.setCurrentUser(null));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[e]),t?localStorage.setItem("currentUser",JSON.stringify({currentUser:t})):localStorage.setItem("currentUser",null),Object(w.jsx)(c.a.Fragment,{children:Object(w.jsxs)(j.d,{children:[Object(w.jsx)(gt,{currentUser:t,path:"/register",component:Object(w.jsx)(ue,{})}),Object(w.jsx)(gt,{currentUser:t,path:"/login",component:Object(w.jsx)(me,{})}),Object(w.jsx)(gt,{currentUser:t,path:"/resetPassword",component:Object(w.jsx)(Oe,{})}),Object(w.jsx)(gt,{currentUser:!t,path:"/orders/:orderId",component:Object(w.jsx)(He,{})}),Object(w.jsx)(gt,{currentUser:!t,path:"/orders",component:Object(w.jsx)(Fe,{})}),Object(w.jsx)(gt,{currentUser:!1,path:"/",component:Object(w.jsx)(T,{})})]})})},wt=Object(b.a)({reducer:{auth:h.reducer,ui:U.a.reducer}});s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(d.a,{store:wt,children:Object(w.jsx)(le.a,{basename:"/",children:Object(w.jsx)(_t,{})})})}),document.getElementById("root"))}],[[121,1,2]]]);
//# sourceMappingURL=main.1ba52c17.chunk.js.map